<!DOCTYPE html>
<html>
    <head>
        <link rel="preload" name="Raleway" as="font" type="font/woff2" crossorigin href="font.woff2"/>
        <link rel="preload" name="Raleway" weight="700" as="font" type="font/woff2" crossorigin href="other-font.woff2"/>
        <script>
            (function () {
  'use strict';

  window.invokePreload = window.invokePreload || {};

  invokePreload.onLoad = function (link) {
    link.setAttribute("preloaded", "true");
    link.removeAttribute("onload");
  };

  invokePreload.onScriptLoad = function (link, error) {
    link.setAttribute("preloaded", !!error ? "error" : "true");
    link.removeAttribute("onload");
    link.removeAttribute("onerror");
  };

  invokePreload.onScriptError = function (link) {
    invokePreload.onScriptLoad(link, true);
  };

  invokePreload.onStyleLoad = function (link) {
    if ([].map.call(document.styleSheets, function (stylesheet) {
      return stylesheet.href;
    }).indexOf(link.href) === -1) {
      link.setAttribute("rel", "stylesheet");
      link.setAttribute("type", "text/css");
      link.setAttribute("media", "all");
      link.setAttribute("preloaded", "true");
      link.removeAttribute("as");
    }

    link.removeAttribute("onload");
  };

}());

        </script>
        <script src="/dist/preload-polyfill.dev.js"></script>
        <script src="/dist/preload-polyfill-invoke.dev.js"></script>
    </head>

    <body>
        <!-- deduplication -->
        <link rel="preload" as="script" href="foo.js" onload="invokePreload.onScriptLoad(this)" onerror="invokePreload.onScriptError(this)" />
        <link rel="preload" as="script" href="foo.js" onload="invokePreload.onScriptLoad(this)" onerror="invokePreload.onScriptError(this)" />
        <!-- js -->
        <link rel="preload" as="script" href="baz.js" onload="invokePreload.onScriptLoad(this)" onerror="invokePreload.onScriptError(this)" />
        <link rel="preload" as="script" href="bar.js" onload="invokePreload.onScriptLoad(this)" onerror="invokePreload.onScriptError(this)" />

        <!-- image -->
        <link rel="preload" as="image" href="img_fjords.jpg" onload="invokePreload.onLoad(this)" />
        <img id="img" style="width:100%"/>

        <!-- style -->
        <link rel="preload" as="style" href="foo.css" onload="invokePreload.onStyleLoad(this)"/>
        <link rel="preload" as="style" href="foo.css" onload="invokePreload.onStyleLoad(this)"/>
        <link rel="preload" as="document" href="." onload="invokePreload.onLoad(this)"/>
        <link rel="preload" as="fetch" href="." onload="invokePreload.onLoad(this)"/>

        <!-- webfont -->
        <h1 style="font-weight: normal">webfont</h1>
        <h1 style="font-weight: bold;">fancy webfont</h1>
        
        <!-- module/nomodule -->
        <link rel="preload" critical as="script" module href="module.js" onload="invokePreload.onScriptLoad(this)" onerror="invokePreload.onScriptError(this)" />
        <link rel="nomodule" critical as="script" href="nomodule.js" onload="invokePreload.onScriptLoad(this)" onerror="invokePreload.onScriptError(this)" />
    </body>
</html>